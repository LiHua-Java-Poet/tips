<template>
    <el-container style="height: 100vh;">
        <el-header class="custom-header" :style="{ height: '60px' }">
            <div class="header-content">
            <!-- 左侧 logo -->
            <div class="block">
                <el-image :src="require('@/assets/logo.png')" style="height: 30px;"></el-image>
                <span style="margin-left: 10px;font-size: 20px;font-weight: 650;color: rgb(48, 49, 51);">Tips</span>
            </div>
            <!-- 右侧头像 + 下拉菜单 -->
            <el-dropdown trigger="hover">
                <span class="avatar-wrapper">
                    <el-avatar
                        icon="el-icon-user-solid"
                        :src="user.headImage"
                        class="avatar"
                    />
                    <span class="username">{{user.name}}</span>
                </span>
                <el-dropdown-menu slot="dropdown">
                    <el-dropdown-item @click.native="navigator('/personage')">个人主页</el-dropdown-item>
                    <el-dropdown-item @click.native="logout()">退出登录</el-dropdown-item>
                </el-dropdown-menu>
            </el-dropdown>
            </div>
        </el-header>
        <el-container>
            <el-aside :width="isCollapse ? '60px' : '175px'" class="aside" style="transition: width 0.5s; display: flex; flex-direction: column; justify-content: space-between; border-right: solid 1px #e6e6e6;">
                <el-menu default-active="1" >
                    <el-menu-item index="1" @click="navigator('/index/all')">
                        <div class="menu-item-content" >
                            <div><svg t="1712771757606" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11131" width="18" height="18"><path d="M192 160a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h192a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32H192z m0-64h192a96 96 0 0 1 96 96v192a96 96 0 0 1-96 96H192a96 96 0 0 1-96-96V192a96 96 0 0 1 96-96zM192 608a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h192a32 32 0 0 0 32-32v-192a32 32 0 0 0-32-32H192z m0-64h192a96 96 0 0 1 96 96v192a96 96 0 0 1-96 96H192a96 96 0 0 1-96-96v-192a96 96 0 0 1 96-96zM640 608a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h192a32 32 0 0 0 32-32v-192a32 32 0 0 0-32-32h-192z m0-64h192a96 96 0 0 1 96 96v192a96 96 0 0 1-96 96h-192a96 96 0 0 1-96-96v-192a96 96 0 0 1 96-96zM602.272 266.272a32 32 0 0 0 0 45.28l112 112a32 32 0 0 0 45.28 0l112-112a32 32 0 0 0 0-45.28l-112-112a32 32 0 0 0-45.28 0l-112 112z m-45.248-45.248l112-112a96 96 0 0 1 135.776 0l112 112a96 96 0 0 1 0 135.776l-112 112a96 96 0 0 1-135.776 0l-112-112a96 96 0 0 1 0-135.776z" fill="#000000" p-id="11132"></path></svg></div>
                            <div class="menu-text" :class="{ 'collapsed': isCollapse }">首页</div>
                        </div>
                    </el-menu-item>
                    <el-menu-item index="2" @click="navigator('/index/task')">
                        <div class="menu-item-content">
                            <div>
                                <svg t="1750150249098" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1533" width="18" height="18"><path d="M109.714286 73.142857c-21.942857 0-36.571429 14.628571-36.571429 36.571429v804.571428c0 21.942857 14.628571 36.571429 36.571429 36.571429h804.571428c21.942857 0 36.571429-14.628571 36.571429-36.571429v-804.571428c0-21.942857-14.628571-36.571429-36.571429-36.571429h-804.571428z m0-73.142857h804.571428c58.514286 0 109.714286 51.2 109.714286 109.714286v804.571428c0 58.514286-51.2 109.714286-109.714286 109.714286h-804.571428C51.2 1024 0 972.8 0 914.285714v-804.571428C0 51.2 51.2 0 109.714286 0z m438.857143 292.571429h219.428571c21.942857 0 36.571429 14.628571 36.571429 36.571428s-14.628571 36.571429-36.571429 36.571429h-219.428571c-21.942857 0-36.571429-14.628571-36.571429-36.571429s14.628571-36.571429 36.571429-36.571428z m-219.428572 438.857142c21.942857 0 36.571429-14.628571 36.571429-36.571428S351.085714 658.285714 329.142857 658.285714s-36.571429 14.628571-36.571428 36.571429 14.628571 36.571429 36.571428 36.571428z m0 73.142858C270.628571 804.571429 219.428571 753.371429 219.428571 694.857143S270.628571 585.142857 329.142857 585.142857 438.857143 636.342857 438.857143 694.857143 387.657143 804.571429 329.142857 804.571429z m-7.314286-446.171429L241.371429 277.942857c-14.628571-14.628571-36.571429-14.628571-51.2 0-14.628571 14.628571-14.628571 36.571429 0 51.2L292.571429 431.542857c7.314286 7.314286 21.942857 14.628571 29.257142 14.628572s21.942857 0 29.257143-7.314286l153.6-153.6c14.628571-14.628571 14.628571-36.571429 0-51.2-14.628571-14.628571-36.571429-14.628571-51.2 0L321.828571 358.4zM548.571429 658.285714h219.428571c21.942857 0 36.571429 14.628571 36.571429 36.571429s-14.628571 36.571429-36.571429 36.571428h-219.428571c-21.942857 0-36.571429-14.628571-36.571429-36.571428s14.628571-36.571429 36.571429-36.571429z" p-id="1534" fill="#515151"></path></svg>
                            </div>
                            <div class="menu-text" :class="{ 'collapsed': isCollapse }">任务</div>
                        </div>
                    </el-menu-item>
                    <el-menu-item index="3" @click="navigator('/index/plan')">
                        <div class="menu-item-content">
                            <div>
                                <svg t="1750150365744" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2923" width="18" height="18"><path d="M861.433649 0H142.889371c-39.65996 0-71.853928 31.581968-71.853927 70.508929v881.346114c0 59.85794 68.913931 93.519906 116.169883 56.549943L457.608055 810.959184c25.949974-20.31998 62.429937-20.31998 88.500911 0l271.136727 197.690801c47.250952 36.848963 116.044883 3.184997 116.044883-56.674943V70.508929C933.287576 31.581968 901.093609 0 861.433649 0z m8.815991 951.974042c0 2.762997-0.724999 4.629995-2.423998 6.236994-1.791998 1.696998-4.346996 2.749997-6.670993 2.749997h-0.001c-1.187999 0-2.847997-0.23-5.143995-2.022998l-0.804999-0.624999-271.272727-197.791801c-23.469976-17.963982-52.584947-27.841972-82.121918-27.841972-29.56697 0-58.669941 9.89699-82.095917 27.890972L149.186365 958.112036l-0.821999 0.643c-2.309998 1.807998-3.977996 2.038998-5.174995 2.038998-0.09 0-9.114991-0.385-9.114991-8.938991V70.509929c0-4.047996 4.036996-7.469992 8.814991-7.469992h718.544278c4.779995 0 8.815991 3.421997 8.815991 7.470992v881.464113z" p-id="2924" fill="#515151"></path><path d="M694.832816 367.96363l-65.854934 65.854934a28.504971 28.504971 0 0 0-7.959992 25.093974l15.548985 93.029907c3.912996 23.133977-19.83198 40.881959-40.15396 29.86497l-81.399918-43.819956c-8.079992-4.284996-17.749982-4.284996-25.708974 0l-81.402918 43.941956c-20.31998 10.895989-44.067956-6.731993-40.14696-29.86497l15.540984-93.032907c1.596998-9.179991-1.465999-18.482981-7.953992-25.096974l-65.854933-65.854934c-16.404983-16.399984-7.346993-45.043955 15.302984-48.469951l90.947909-13.587987c9.056991-1.348999 16.892983-7.222993 20.806979-15.547984l40.641959-84.584915a27.399972 27.399972 0 0 1 24.849975-15.789984 27.399972 27.399972 0 0 1 24.849975 15.789984l40.634959 84.584915c4.043996 8.324992 11.873988 14.198986 20.812979 15.547984l90.948909 13.588987c22.893977 3.304997 31.949968 31.947968 15.549984 48.352951z" p-id="2925" fill="#515151"></path></svg>
                            </div>
                            <div class="menu-text" :class="{ 'collapsed': isCollapse }">计划</div>
                        </div>
                    </el-menu-item>
                    <el-menu-item index="4" @click="navigator('/index/document')">
                        <div class="menu-item-content">
                            <div><svg t="1712771795776" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11278" width="18" height="18"><path d="M288 320a32 32 0 1 1 0-64h448a32 32 0 0 1 0 64H288zM288 544a32 32 0 0 1 0-64h448a32 32 0 0 1 0 64H288zM288 768a32 32 0 0 1 0-64h128a32 32 0 0 1 0 64H288z" fill="#000000" p-id="11279"></path><path d="M807.968 802.24a32 32 0 0 1 41.984 48.32l-153.856 133.6a32 32 0 0 1-20.992 7.84H195.04C140.16 992 96 946.624 96 891.072V132.928C96 77.376 140.16 32 195.04 32h633.92C883.84 32 928 77.376 928 132.928v564.32a32 32 0 1 1-64 0V132.928C864 112.32 848.096 96 828.96 96H195.04C175.904 96 160 112.32 160 132.928v758.144C160 911.68 175.904 928 195.04 928h468.096l144.832-125.76z" fill="#000000" p-id="11280"></path><path d="M704 959.136a32 32 0 1 1-64 0v-186.24C640 717.408 684.16 672 739.04 672h157.632a32 32 0 0 1 0 64h-157.632c-19.136 0-35.04 16.32-35.04 36.928v186.24z" fill="#000000" p-id="11281"></path></svg></div>
                            <div class="menu-text" :class="{ 'collapsed': isCollapse }">文档</div>
                        </div>
                    </el-menu-item>
                    <el-menu-item index="5" @click="navigator('/index/collect')">
                        <div class="menu-item-content">
                            <div>
                                <svg t="1753261577723" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5872" width="18" height="18"><path d="M788.257663 426.731307c7.812278-6.730952 5.46738-15.260064-1.214973-18.224598-21.869518-9.719786-23.084491-10.934759-64.393582-23.084492-52.632641-15.478759-114.304682-20.557347-106.310158-28.551871 6.682353-6.682353 26.717261-5.783273 46.168983-4.859893 12.757219 0.607487 27.130352 2.770139 64.393582 6.074867 47.991443 4.252406 60.141175 7.897326 85.655613 4.252406 65.207614-9.306695 81.913496-22.161112 95.205302-33.265967 10.570267-10.849711 19.791914-21.33493 28.114481-31.735101 20.022759-24.97985 36.266951-52.2074 49.04847-79.799442 7.836577-22.464855-32.488384-2.223401-91.572533-2.818738-60.141175-0.607487-91.050094-12.635722-90.515506-16.402139 0.607487-4.252406 33.180919 2.126203 96.590372-11.542246 54.139207-11.663743 74.538608-21.32278 91.122993-32.804277 18.722738-12.963764 24.566759-29.97339 28.235978-47.639101 6.038417-39.814673 4.313155-73.894672-3.936514-94.512768-2.429946-6.074866-6.244962-18.516192-130.002136-7.289839-52.073753 4.726246-146.951013 14.09369-247.85454 60.748662-84.817282 39.219336-136.818136 87.648169-195.610691 143.366842-134.764831 127.693687-207.626776 256.128508-255.144379 341.407479-68.062801 122.141259-107.913923 229.957984-134.862029 303.743308-22.063914 60.420619-37.700619 102.482992-47.991443 141.544382-0.668235 2.539294-3.64492 14.579679 0 19.439572 11.530096 15.369411 41.30909 7.289839 45.561496 5.46738 12.319829-5.285134 24.214417-19.97416 30.374331-32.804278 26.498566-55.196234 41.515635-109.481238 52.851336-143.974328 20.375101-61.963635 56.30186-96.566073 74.720854-112.385024 57.322437-49.230715 83.249966-51.527015 145.796788-65.608555 66.884277-15.053518 166.900873-65.523507 352.342238-183.460959 31.613604-20.107807 59.059849-38.344555 83.07987-55.147635 0.048599-0.048599 0.097198-0.085048 0.145797-0.133647zM777.322904 1023.283166h-601.411752c-20.132107 0-36.449197-16.317091-36.449197-36.449197s16.317091-36.449197 36.449197-36.449197h601.411752c20.132107 0 36.449197 16.317091 36.449197 36.449197s-16.317091 36.449197-36.449197 36.449197z" p-id="5873"></path></svg>
                            </div>
                            <div class="menu-text" :class="{ 'collapsed': isCollapse }">记录</div>
                        </div>
                    </el-menu-item>
                    <el-menu-item index="6">
                        <div style="display: flex;">
                            <div><svg t="1712772330917" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11379" width="20" height="20"><path d="M897.088 298.794667l-512 0c-11.776 0-21.333333-9.557333-21.333333-21.333333s9.557333-21.333333 21.333333-21.333333l512 0c11.797333 0 21.333333 9.557333 21.333333 21.333333S908.885333 298.794667 897.088 298.794667z" fill="#5D646F" p-id="11380"></path><path d="M897.088 533.418667l-512 0c-11.776 0-21.333333-9.557333-21.333333-21.333333s9.557333-21.333333 21.333333-21.333333l512 0c11.797333 0 21.333333 9.557333 21.333333 21.333333S908.885333 533.418667 897.088 533.418667z" fill="#5D646F" p-id="11381"></path><path d="M897.088 768.042667l-512 0c-11.776 0-21.333333-9.536-21.333333-21.333333s9.557333-21.333333 21.333333-21.333333l512 0c11.797333 0 21.333333 9.536 21.333333 21.333333S908.885333 768.042667 897.088 768.042667z" fill="#5D646F" p-id="11382"></path><path d="M193.066667 277.461333m-42.666667 0a2 2 0 1 0 85.333333 0 2 2 0 1 0-85.333333 0Z" fill="#5D646F" p-id="11383"></path><path d="M193.066667 512.085333m-42.666667 0a2 2 0 1 0 85.333333 0 2 2 0 1 0-85.333333 0Z" fill="#5D646F" p-id="11384"></path><path d="M193.066667 746.709333m-42.666667 0a2 2 0 1 0 85.333333 0 2 2 0 1 0-85.333333 0Z" fill="#5D646F" p-id="11385"></path></svg></div>
                            <div class="menu-text" :class="{ 'collapsed': isCollapse }">关于</div>
                        </div>
                    </el-menu-item>
                </el-menu>
                <div class="collapse-toggle" @click="toggleCollapse">
                    <svg v-if="!isCollapse" t="1753091902505" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7334" width="20" height="20"><path d="M42.666667 149.333333a21.333333 21.333333 0 0 1 21.333333-21.333333h896a21.333333 21.333333 0 0 1 0 42.666667H64a21.333333 21.333333 0 0 1-21.333333-21.333334z m917.333333 234.666667H362.666667a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667z m0 256H64a21.333333 21.333333 0 0 0 0 42.666667h896a21.333333 21.333333 0 0 0 0-42.666667z m0 256H64a21.333333 21.333333 0 0 0 0 42.666667h896a21.333333 21.333333 0 0 0 0-42.666667zM157.5 300.293333A21.333333 21.333333 0 0 1 170.666667 320v170.666667a21.333333 21.333333 0 0 1-36.42 15.086666l-85.333334-85.333333a21.333333 21.333333 0 0 1 0-30.173333l85.333334-85.333334a21.333333 21.333333 0 0 1 23.253333-4.62zM128 371.5L94.166667 405.333333 128 439.166667z" fill="#5C5C66" p-id="7335"></path></svg>
                    <svg  v-else t="1753091928746" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7544" width="20" height="20"><path d="M42.666667 149.333333a21.333333 21.333333 0 0 1 21.333333-21.333333h896a21.333333 21.333333 0 0 1 0 42.666667H64a21.333333 21.333333 0 0 1-21.333333-21.333334z m917.333333 234.666667H362.666667a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667z m0 256H64a21.333333 21.333333 0 0 0 0 42.666667h896a21.333333 21.333333 0 0 0 0-42.666667z m0 256H64a21.333333 21.333333 0 0 0 0 42.666667h896a21.333333 21.333333 0 0 0 0-42.666667zM42.666667 490.666667V320a21.333333 21.333333 0 0 1 36.42-15.086667l85.333333 85.333334a21.333333 21.333333 0 0 1 0 30.173333l-85.333333 85.333333A21.333333 21.333333 0 0 1 42.666667 490.666667z m42.666666-51.5L119.166667 405.333333 85.333333 371.5z" fill="#5C5C66" p-id="7545"></path></svg>
                </div>
            </el-aside>
            <el-main style="padding: 10px ;background-color: rgb(245, 245, 245);">
                <router-view></router-view>                    
            </el-main>
        </el-container>
    </el-container>
</template>


<script>
export default {
  name: 'indexPage',
  data() {
    return {
      isCollapse: false
    };
  },
  computed: {
    user() {
      return this.$store.getters.userInfo;
    }
  },
  methods: {
    toggleCollapse() {
      this.isCollapse = !this.isCollapse;
    },
    navigator(path) {
      if (this.$route.path !== path) {
        this.$router.push(path);
      }
    },
    logout() {
      this.$router.push('/login');
      this.$store.dispatch('logout');
    }
  }
};
</script>

<style scoped>
.block{
    display: flex;
    align-items: center;      /* 垂直居中 */
}
.el-header.custom-header {
  background-color: #ffffff;
  padding: 0 50px;
  display: flex;
  align-items: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  z-index: 10;
  height: 60px;
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.avatar-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 18px;
  cursor: pointer;
}

.avatar {
  width: 40px;
  height: 40px;
  font-size: 20px;
}

.username {
  font-weight: 500;
  color: #333;
}

.el-container > .el-container {
  height: calc(100vh - 60px);
}

.el-aside {
  transition: width 0.3s ease;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  border-right: 1px solid #e6e6e6;
  background-color: #fff;
  overflow: hidden;
}

.el-main.main-content {
  background-color: #f5f5f5;
  padding: 10px;
  overflow: auto;
}

.menu-item-content {
  display: flex;
  align-items: center;
}

.menu-text {
  margin-left: 10px;
  white-space: nowrap;
  transition: opacity 0.3s, width 0.3s;
  opacity: 1;
  width: auto;
  overflow: hidden;
}

.menu-text.collapsed {
  opacity: 0;
  width: 0;
}

.collapse-toggle {
  padding: 10px;
  border-top: 1px solid #e6e6e6;
  display: flex;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s;
}

.rotate-icon {
  transition: transform 0.3s ease;
}

.open-icon {
  transform: rotate(0deg);
}

.close-icon {
  transform: rotate(180deg);
}
</style>